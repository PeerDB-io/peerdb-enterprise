{{- if or (and .Values.peerdbUI.credentials.password (not .Values.peerdbUI.credentials.passwordExistingSecret)) (and .Values.peerdb.credentials.password (not .Values.peerdb.credentials.existingSecret)) (not .Values.peerdbUI.credentials.nexauth_ExistingSecret) }}
apiVersion: v1
kind: Secret
metadata:
  name: peerdb-server-ui-secret
  labels:
    {{- include "peerdb.common.labels" . | nindent 4 }}
stringData:
  {{- if and .Values.peerdbUI.credentials.password (not .Values.peerdbUI.credentials.passwordExistingSecret) }}
  UI_PEERDB_PASSWORD: '{{ .Values.peerdbUI.credentials.password }}'
  {{- end }}
  {{- if and .Values.peerdb.credentials.password (not .Values.peerdb.credentials.existingSecret) }}
  SERVER_PEERDB_PASSWORD: '{{ .Values.peerdb.credentials.password }}'
  {{- end }}
  {{- if not .Values.peerdbUI.credentials.nexauth_ExistingSecret }}
  UI_NEXTAUTH_SECRET: '{{ .Values.peerdbUI.credentials.nexauth_secret | default (randAlphaNum 60) }}'
  {{- end }}
{{- end }}